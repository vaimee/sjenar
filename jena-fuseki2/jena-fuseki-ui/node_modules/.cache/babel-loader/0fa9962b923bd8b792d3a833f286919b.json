{"ast":null,"code":"function cov_1lxj7po26n() {\n  var path = \"C:\\\\progs\\\\vaimee\\\\sjenar\\\\jena-fuseki2\\\\jena-fuseki-ui\\\\src\\\\services\\\\fuseki.service.js\";\n  var hash = \"b8b9cce371e8d78c3f81f2973b719a646188b966\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"C:\\\\progs\\\\vaimee\\\\sjenar\\\\jena-fuseki2\\\\jena-fuseki-ui\\\\src\\\\services\\\\fuseki.service.js\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 23,\n          column: 29\n        },\n        end: {\n          line: 23,\n          column: 69\n        }\n      },\n      \"1\": {\n        start: {\n          line: 24,\n          column: 29\n        },\n        end: {\n          line: 24,\n          column: 95\n        }\n      },\n      \"2\": {\n        start: {\n          line: 26,\n          column: 36\n        },\n        end: {\n          line: 26,\n          column: 76\n        }\n      },\n      \"3\": {\n        start: {\n          line: 27,\n          column: 36\n        },\n        end: {\n          line: 27,\n          column: 102\n        }\n      },\n      \"4\": {\n        start: {\n          line: 34,\n          column: 4\n        },\n        end: {\n          line: 34,\n          column: 25\n        }\n      },\n      \"5\": {\n        start: {\n          line: 35,\n          column: 4\n        },\n        end: {\n          line: 35,\n          column: 37\n        }\n      },\n      \"6\": {\n        start: {\n          line: 52,\n          column: 24\n        },\n        end: {\n          line: 52,\n          column: 27\n        }\n      },\n      \"7\": {\n        start: {\n          line: 53,\n          column: 4\n        },\n        end: {\n          line: 55,\n          column: 5\n        }\n      },\n      \"8\": {\n        start: {\n          line: 54,\n          column: 6\n        },\n        end: {\n          line: 54,\n          column: 44\n        }\n      },\n      \"9\": {\n        start: {\n          line: 56,\n          column: 21\n        },\n        end: {\n          line: 56,\n          column: 86\n        }\n      },\n      \"10\": {\n        start: {\n          line: 57,\n          column: 4\n        },\n        end: {\n          line: 57,\n          column: 40\n        }\n      },\n      \"11\": {\n        start: {\n          line: 61,\n          column: 21\n        },\n        end: {\n          line: 61,\n          column: 68\n        }\n      },\n      \"12\": {\n        start: {\n          line: 62,\n          column: 4\n        },\n        end: {\n          line: 62,\n          column: 24\n        }\n      },\n      \"13\": {\n        start: {\n          line: 66,\n          column: 22\n        },\n        end: {\n          line: 66,\n          column: 42\n        }\n      },\n      \"14\": {\n        start: {\n          line: 67,\n          column: 4\n        },\n        end: {\n          line: 78,\n          column: 5\n        }\n      },\n      \"15\": {\n        start: {\n          line: 68,\n          column: 6\n        },\n        end: {\n          line: 68,\n          column: 51\n        }\n      },\n      \"16\": {\n        start: {\n          line: 70,\n          column: 6\n        },\n        end: {\n          line: 72,\n          column: 7\n        }\n      },\n      \"17\": {\n        start: {\n          line: 71,\n          column: 8\n        },\n        end: {\n          line: 71,\n          column: 37\n        }\n      },\n      \"18\": {\n        start: {\n          line: 73,\n          column: 6\n        },\n        end: {\n          line: 73,\n          column: 28\n        }\n      },\n      \"19\": {\n        start: {\n          line: 74,\n          column: 6\n        },\n        end: {\n          line: 74,\n          column: 94\n        }\n      },\n      \"20\": {\n        start: {\n          line: 76,\n          column: 6\n        },\n        end: {\n          line: 76,\n          column: 27\n        }\n      },\n      \"21\": {\n        start: {\n          line: 77,\n          column: 6\n        },\n        end: {\n          line: 77,\n          column: 103\n        }\n      },\n      \"22\": {\n        start: {\n          line: 82,\n          column: 4\n        },\n        end: {\n          line: 82,\n          column: 43\n        }\n      },\n      \"23\": {\n        start: {\n          line: 86,\n          column: 21\n        },\n        end: {\n          line: 86,\n          column: 82\n        }\n      },\n      \"24\": {\n        start: {\n          line: 87,\n          column: 4\n        },\n        end: {\n          line: 87,\n          column: 24\n        }\n      },\n      \"25\": {\n        start: {\n          line: 91,\n          column: 27\n        },\n        end: {\n          line: 103,\n          column: 6\n        }\n      },\n      \"26\": {\n        start: {\n          line: 104,\n          column: 20\n        },\n        end: {\n          line: 104,\n          column: 22\n        }\n      },\n      \"27\": {\n        start: {\n          line: 105,\n          column: 31\n        },\n        end: {\n          line: 105,\n          column: 48\n        }\n      },\n      \"28\": {\n        start: {\n          line: 106,\n          column: 4\n        },\n        end: {\n          line: 106,\n          column: 86\n        }\n      },\n      \"29\": {\n        start: {\n          line: 107,\n          column: 27\n        },\n        end: {\n          line: 107,\n          column: 44\n        }\n      },\n      \"30\": {\n        start: {\n          line: 108,\n          column: 4\n        },\n        end: {\n          line: 110,\n          column: 6\n        }\n      },\n      \"31\": {\n        start: {\n          line: 109,\n          column: 6\n        },\n        end: {\n          line: 109,\n          column: 52\n        }\n      },\n      \"32\": {\n        start: {\n          line: 111,\n          column: 4\n        },\n        end: {\n          line: 111,\n          column: 18\n        }\n      },\n      \"33\": {\n        start: {\n          line: 115,\n          column: 4\n        },\n        end: {\n          line: 115,\n          column: 70\n        }\n      },\n      \"34\": {\n        start: {\n          line: 128,\n          column: 4\n        },\n        end: {\n          line: 128,\n          column: 73\n        }\n      },\n      \"35\": {\n        start: {\n          line: 132,\n          column: 17\n        },\n        end: {\n          line: 135,\n          column: 6\n        }\n      },\n      \"36\": {\n        start: {\n          line: 139,\n          column: 20\n        },\n        end: {\n          line: 141,\n          column: 5\n        }\n      },\n      \"37\": {\n        start: {\n          line: 142,\n          column: 4\n        },\n        end: {\n          line: 156,\n          column: 5\n        }\n      },\n      \"38\": {\n        start: {\n          line: 143,\n          column: 6\n        },\n        end: {\n          line: 145,\n          column: 8\n        }\n      },\n      \"39\": {\n        start: {\n          line: 147,\n          column: 6\n        },\n        end: {\n          line: 154,\n          column: 7\n        }\n      },\n      \"40\": {\n        start: {\n          line: 148,\n          column: 8\n        },\n        end: {\n          line: 153,\n          column: 9\n        }\n      },\n      \"41\": {\n        start: {\n          line: 149,\n          column: 10\n        },\n        end: {\n          line: 151,\n          column: 11\n        }\n      },\n      \"42\": {\n        start: {\n          line: 150,\n          column: 12\n        },\n        end: {\n          line: 150,\n          column: 125\n        }\n      },\n      \"43\": {\n        start: {\n          line: 152,\n          column: 10\n        },\n        end: {\n          line: 152,\n          column: 183\n        }\n      },\n      \"44\": {\n        start: {\n          line: 155,\n          column: 6\n        },\n        end: {\n          line: 155,\n          column: 17\n        }\n      },\n      \"45\": {\n        start: {\n          line: 160,\n          column: 4\n        },\n        end: {\n          line: 160,\n          column: 51\n        }\n      },\n      \"46\": {\n        start: {\n          line: 164,\n          column: 27\n        },\n        end: {\n          line: 176,\n          column: 6\n        }\n      },\n      \"47\": {\n        start: {\n          line: 177,\n          column: 20\n        },\n        end: {\n          line: 177,\n          column: 22\n        }\n      },\n      \"48\": {\n        start: {\n          line: 178,\n          column: 31\n        },\n        end: {\n          line: 178,\n          column: 48\n        }\n      },\n      \"49\": {\n        start: {\n          line: 179,\n          column: 4\n        },\n        end: {\n          line: 179,\n          column: 77\n        }\n      },\n      \"50\": {\n        start: {\n          line: 180,\n          column: 27\n        },\n        end: {\n          line: 180,\n          column: 44\n        }\n      },\n      \"51\": {\n        start: {\n          line: 181,\n          column: 4\n        },\n        end: {\n          line: 183,\n          column: 6\n        }\n      },\n      \"52\": {\n        start: {\n          line: 182,\n          column: 6\n        },\n        end: {\n          line: 182,\n          column: 52\n        }\n      },\n      \"53\": {\n        start: {\n          line: 184,\n          column: 4\n        },\n        end: {\n          line: 184,\n          column: 18\n        }\n      },\n      \"54\": {\n        start: {\n          line: 188,\n          column: 4\n        },\n        end: {\n          line: 196,\n          column: 8\n        }\n      },\n      \"55\": {\n        start: {\n          line: 200,\n          column: 4\n        },\n        end: {\n          line: 212,\n          column: 8\n        }\n      },\n      \"56\": {\n        start: {\n          line: 211,\n          column: 8\n        },\n        end: {\n          line: 211,\n          column: 44\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"(anonymous_0)\",\n        decl: {\n          start: {\n            line: 33,\n            column: 2\n          },\n          end: {\n            line: 33,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 33,\n            column: 25\n          },\n          end: {\n            line: 36,\n            column: 3\n          }\n        },\n        line: 33\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 50,\n            column: 2\n          },\n          end: {\n            line: 50,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 50,\n            column: 21\n          },\n          end: {\n            line: 58,\n            column: 3\n          }\n        },\n        line: 50\n      },\n      \"2\": {\n        name: \"(anonymous_2)\",\n        decl: {\n          start: {\n            line: 60,\n            column: 2\n          },\n          end: {\n            line: 60,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 60,\n            column: 25\n          },\n          end: {\n            line: 63,\n            column: 3\n          }\n        },\n        line: 60\n      },\n      \"3\": {\n        name: \"(anonymous_3)\",\n        decl: {\n          start: {\n            line: 65,\n            column: 2\n          },\n          end: {\n            line: 65,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 65,\n            column: 27\n          },\n          end: {\n            line: 79,\n            column: 3\n          }\n        },\n        line: 65\n      },\n      \"4\": {\n        name: \"(anonymous_4)\",\n        decl: {\n          start: {\n            line: 81,\n            column: 2\n          },\n          end: {\n            line: 81,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 81,\n            column: 24\n          },\n          end: {\n            line: 83,\n            column: 3\n          }\n        },\n        line: 81\n      },\n      \"5\": {\n        name: \"(anonymous_5)\",\n        decl: {\n          start: {\n            line: 85,\n            column: 2\n          },\n          end: {\n            line: 85,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 85,\n            column: 38\n          },\n          end: {\n            line: 88,\n            column: 3\n          }\n        },\n        line: 85\n      },\n      \"6\": {\n        name: \"(anonymous_6)\",\n        decl: {\n          start: {\n            line: 90,\n            column: 2\n          },\n          end: {\n            line: 90,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 90,\n            column: 47\n          },\n          end: {\n            line: 112,\n            column: 3\n          }\n        },\n        line: 90\n      },\n      \"7\": {\n        name: \"(anonymous_7)\",\n        decl: {\n          start: {\n            line: 108,\n            column: 49\n          },\n          end: {\n            line: 108,\n            column: 50\n          }\n        },\n        loc: {\n          start: {\n            line: 108,\n            column: 60\n          },\n          end: {\n            line: 110,\n            column: 5\n          }\n        },\n        line: 108\n      },\n      \"8\": {\n        name: \"(anonymous_8)\",\n        decl: {\n          start: {\n            line: 114,\n            column: 2\n          },\n          end: {\n            line: 114,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 114,\n            column: 36\n          },\n          end: {\n            line: 116,\n            column: 3\n          }\n        },\n        line: 114\n      },\n      \"9\": {\n        name: \"(anonymous_9)\",\n        decl: {\n          start: {\n            line: 127,\n            column: 2\n          },\n          end: {\n            line: 127,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 127,\n            column: 36\n          },\n          end: {\n            line: 129,\n            column: 3\n          }\n        },\n        line: 127\n      },\n      \"10\": {\n        name: \"(anonymous_10)\",\n        decl: {\n          start: {\n            line: 131,\n            column: 2\n          },\n          end: {\n            line: 131,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 131,\n            column: 49\n          },\n          end: {\n            line: 157,\n            column: 3\n          }\n        },\n        line: 131\n      },\n      \"11\": {\n        name: \"(anonymous_11)\",\n        decl: {\n          start: {\n            line: 159,\n            column: 2\n          },\n          end: {\n            line: 159,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 159,\n            column: 20\n          },\n          end: {\n            line: 161,\n            column: 3\n          }\n        },\n        line: 159\n      },\n      \"12\": {\n        name: \"(anonymous_12)\",\n        decl: {\n          start: {\n            line: 163,\n            column: 2\n          },\n          end: {\n            line: 163,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 163,\n            column: 51\n          },\n          end: {\n            line: 185,\n            column: 3\n          }\n        },\n        line: 163\n      },\n      \"13\": {\n        name: \"(anonymous_13)\",\n        decl: {\n          start: {\n            line: 181,\n            column: 49\n          },\n          end: {\n            line: 181,\n            column: 50\n          }\n        },\n        loc: {\n          start: {\n            line: 181,\n            column: 60\n          },\n          end: {\n            line: 183,\n            column: 5\n          }\n        },\n        line: 181\n      },\n      \"14\": {\n        name: \"(anonymous_14)\",\n        decl: {\n          start: {\n            line: 187,\n            column: 2\n          },\n          end: {\n            line: 187,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 187,\n            column: 44\n          },\n          end: {\n            line: 197,\n            column: 3\n          }\n        },\n        line: 187\n      },\n      \"15\": {\n        name: \"(anonymous_15)\",\n        decl: {\n          start: {\n            line: 199,\n            column: 2\n          },\n          end: {\n            line: 199,\n            column: 3\n          }\n        },\n        loc: {\n          start: {\n            line: 199,\n            column: 49\n          },\n          end: {\n            line: 213,\n            column: 3\n          }\n        },\n        line: 199\n      },\n      \"16\": {\n        name: \"(anonymous_16)\",\n        decl: {\n          start: {\n            line: 210,\n            column: 13\n          },\n          end: {\n            line: 210,\n            column: 14\n          }\n        },\n        loc: {\n          start: {\n            line: 210,\n            column: 22\n          },\n          end: {\n            line: 212,\n            column: 7\n          }\n        },\n        line: 210\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 53,\n            column: 11\n          },\n          end: {\n            line: 53,\n            column: 68\n          }\n        },\n        type: \"binary-expr\",\n        locations: [{\n          start: {\n            line: 53,\n            column: 11\n          },\n          end: {\n            line: 53,\n            column: 40\n          }\n        }, {\n          start: {\n            line: 53,\n            column: 44\n          },\n          end: {\n            line: 53,\n            column: 68\n          }\n        }],\n        line: 53\n      },\n      \"1\": {\n        loc: {\n          start: {\n            line: 56,\n            column: 21\n          },\n          end: {\n            line: 56,\n            column: 86\n          }\n        },\n        type: \"cond-expr\",\n        locations: [{\n          start: {\n            line: 56,\n            column: 51\n          },\n          end: {\n            line: 56,\n            column: 64\n          }\n        }, {\n          start: {\n            line: 56,\n            column: 67\n          },\n          end: {\n            line: 56,\n            column: 86\n          }\n        }],\n        line: 56\n      },\n      \"2\": {\n        loc: {\n          start: {\n            line: 70,\n            column: 6\n          },\n          end: {\n            line: 72,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 70,\n            column: 6\n          },\n          end: {\n            line: 72,\n            column: 7\n          }\n        }, {\n          start: {\n            line: undefined,\n            column: undefined\n          },\n          end: {\n            line: undefined,\n            column: undefined\n          }\n        }],\n        line: 70\n      },\n      \"3\": {\n        loc: {\n          start: {\n            line: 147,\n            column: 6\n          },\n          end: {\n            line: 154,\n            column: 7\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 147,\n            column: 6\n          },\n          end: {\n            line: 154,\n            column: 7\n          }\n        }, {\n          start: {\n            line: undefined,\n            column: undefined\n          },\n          end: {\n            line: undefined,\n            column: undefined\n          }\n        }],\n        line: 147\n      },\n      \"4\": {\n        loc: {\n          start: {\n            line: 148,\n            column: 8\n          },\n          end: {\n            line: 153,\n            column: 9\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 148,\n            column: 8\n          },\n          end: {\n            line: 153,\n            column: 9\n          }\n        }, {\n          start: {\n            line: undefined,\n            column: undefined\n          },\n          end: {\n            line: undefined,\n            column: undefined\n          }\n        }],\n        line: 148\n      },\n      \"5\": {\n        loc: {\n          start: {\n            line: 149,\n            column: 10\n          },\n          end: {\n            line: 151,\n            column: 11\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 149,\n            column: 10\n          },\n          end: {\n            line: 151,\n            column: 11\n          }\n        }, {\n          start: {\n            line: undefined,\n            column: undefined\n          },\n          end: {\n            line: undefined,\n            column: undefined\n          }\n        }],\n        line: 149\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0,\n      \"33\": 0,\n      \"34\": 0,\n      \"35\": 0,\n      \"36\": 0,\n      \"37\": 0,\n      \"38\": 0,\n      \"39\": 0,\n      \"40\": 0,\n      \"41\": 0,\n      \"42\": 0,\n      \"43\": 0,\n      \"44\": 0,\n      \"45\": 0,\n      \"46\": 0,\n      \"47\": 0,\n      \"48\": 0,\n      \"49\": 0,\n      \"50\": 0,\n      \"51\": 0,\n      \"52\": 0,\n      \"53\": 0,\n      \"54\": 0,\n      \"55\": 0,\n      \"56\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0\n    },\n    b: {\n      \"0\": [0, 0],\n      \"1\": [0, 0],\n      \"2\": [0, 0],\n      \"3\": [0, 0],\n      \"4\": [0, 0],\n      \"5\": [0, 0]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"b8b9cce371e8d78c3f81f2973b719a646188b966\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n\n  var actualCoverage = coverage[path];\n  {\n    // @ts-ignore\n    cov_1lxj7po26n = function () {\n      return actualCoverage;\n    };\n  }\n  return actualCoverage;\n}\n\ncov_1lxj7po26n();\nimport \"core-js/modules/es.error.cause.js\";\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport axios from 'axios';\nimport qs from 'qs';\nimport ServerStatus from '@/model/server.status';\nimport { BUS } from '@/events';\nconst DATASET_SIZE_QUERY_1 = (cov_1lxj7po26n().s[0]++, 'select (count(*) as ?count) {?s ?p ?o}');\nconst DATASET_SIZE_QUERY_2 = (cov_1lxj7po26n().s[1]++, 'select ?g (count(*) as ?count) {graph ?g {?s ?p ?o}} group by ?g');\nconst DATASET_COUNT_GRAPH_QUERY_1 = (cov_1lxj7po26n().s[2]++, 'select (count(*) as ?count) {?s ?p ?o}');\nconst DATASET_COUNT_GRAPH_QUERY_2 = (cov_1lxj7po26n().s[3]++, 'select ?g (count(*) as ?count) {graph ?g {?s ?p ?o}} group by ?g');\n\nclass FusekiService {\n  /**\n   * @param {Location} location\n   */\n  constructor(location) {\n    cov_1lxj7po26n().f[0]++;\n    cov_1lxj7po26n().s[4]++;\n    this.isOffline = true;\n    cov_1lxj7po26n().s[5]++;\n    this.pathname = location.pathname;\n  }\n  /**\n   * Gets the Fuseki URL, only the pathname onward. The protocol, server, port, etc,\n   * are left to the browser/JS engine & Vue to choose. Previously we were passing\n   * strings such as `/#/ping$`. But this did not work when the application was\n   * deployed on a Tomcat server, for example, where the base URL could be something\n   * like `http://localhost:8080/jena-fuseki/#/`.\n   *\n   * See RC1 vote thread for 4.4.0 for more: https://lists.apache.org/thread/z3gb5w95oc7c4v0g1jpk9jkxm0l4b7lh\n   *\n   * @param {string} url - Vue route URL\n   * @return {string} a new route URL that includes any pathname in the URL\n   */\n\n\n  getFusekiUrl(url) {\n    cov_1lxj7po26n().f[1]++;\n    // remove leading `/`'s\n    let normalizedUrl = (cov_1lxj7po26n().s[6]++, url);\n    cov_1lxj7po26n().s[7]++;\n\n    while ((cov_1lxj7po26n().b[0][0]++, normalizedUrl.startsWith('/')) && (cov_1lxj7po26n().b[0][1]++, normalizedUrl.length > 0)) {\n      cov_1lxj7po26n().s[8]++;\n      normalizedUrl = normalizedUrl.slice(1);\n    }\n\n    const pathname = (cov_1lxj7po26n().s[9]++, this.pathname.endsWith('/') ? (cov_1lxj7po26n().b[1][0]++, this.pathname) : (cov_1lxj7po26n().b[1][1]++, `${this.pathname}/`));\n    cov_1lxj7po26n().s[10]++;\n    return `${pathname}${normalizedUrl}`;\n  }\n\n  async getServerData() {\n    cov_1lxj7po26n().f[2]++;\n    const response = (cov_1lxj7po26n().s[11]++, await axios.get(this.getFusekiUrl('/$/server')));\n    cov_1lxj7po26n().s[12]++;\n    return response.data;\n  }\n\n  async getServerStatus() {\n    cov_1lxj7po26n().f[3]++;\n    const startTime = (cov_1lxj7po26n().s[13]++, new Date().getTime());\n    cov_1lxj7po26n().s[14]++;\n\n    try {\n      cov_1lxj7po26n().s[15]++;\n      await axios.get(this.getFusekiUrl('/$/ping')); // connection reset?\n\n      cov_1lxj7po26n().s[16]++;\n\n      if (this.isOffline) {\n        cov_1lxj7po26n().b[2][0]++;\n        cov_1lxj7po26n().s[17]++;\n        BUS.$emit('connection:reset');\n      } else {\n        cov_1lxj7po26n().b[2][1]++;\n      }\n\n      cov_1lxj7po26n().s[18]++;\n      this.isOffline = false;\n      cov_1lxj7po26n().s[19]++;\n      return new ServerStatus(true, `Last ping returned OK in ${this._duration(startTime)}ms`);\n    } catch (error) {\n      cov_1lxj7po26n().s[20]++;\n      this.isOffline = true;\n      cov_1lxj7po26n().s[21]++;\n      return new ServerStatus(false, `Last ping returned \"${error}\" in ${this._duration(startTime)}ms`);\n    }\n  }\n\n  _duration(startTime) {\n    cov_1lxj7po26n().f[4]++;\n    cov_1lxj7po26n().s[22]++;\n    return new Date().getTime() - startTime;\n  }\n\n  async getDatasetStats(datasetName) {\n    cov_1lxj7po26n().f[5]++;\n    const response = (cov_1lxj7po26n().s[23]++, await axios.get(this.getFusekiUrl(`/$/stats/${datasetName}`)));\n    cov_1lxj7po26n().s[24]++;\n    return response.data;\n  }\n\n  async getDatasetSize(datasetName, endpoint) {\n    cov_1lxj7po26n().f[6]++;\n    const promisesResult = (cov_1lxj7po26n().s[25]++, await Promise.all([axios.get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n      params: {\n        query: DATASET_SIZE_QUERY_1\n      }\n    }), axios.get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n      params: {\n        query: DATASET_SIZE_QUERY_2\n      }\n    })]));\n    const results = (cov_1lxj7po26n().s[26]++, {});\n    const defaultGraphResult = (cov_1lxj7po26n().s[27]++, promisesResult[0]);\n    cov_1lxj7po26n().s[28]++;\n    results['default graph'] = defaultGraphResult.data.results.bindings[0].count.value;\n    const allGraphResult = (cov_1lxj7po26n().s[29]++, promisesResult[1]);\n    cov_1lxj7po26n().s[30]++;\n    allGraphResult.data.results.bindings.forEach(binding => {\n      cov_1lxj7po26n().f[7]++;\n      cov_1lxj7po26n().s[31]++;\n      results[binding.g.value] = binding.count.value;\n    });\n    cov_1lxj7po26n().s[32]++;\n    return results;\n  }\n\n  async deleteDataset(datasetName) {\n    cov_1lxj7po26n().f[8]++;\n    cov_1lxj7po26n().s[33]++;\n    await axios.delete(this.getFusekiUrl(`/$/datasets${datasetName}`));\n  }\n  /**\n   * @param datasetName\n   * @returns {Promise<{\n   *   data: {\n   *     taskId: string,\n   *     requestId: number\n   *   }\n   * }>}\n   */\n\n\n  async backupDataset(datasetName) {\n    cov_1lxj7po26n().f[9]++;\n    cov_1lxj7po26n().s[34]++;\n    return await axios.post(this.getFusekiUrl(`/$/backup${datasetName}`));\n  }\n\n  async createDataset(datasetName, datasetType) {\n    cov_1lxj7po26n().f[10]++;\n    const data = (cov_1lxj7po26n().s[35]++, qs.stringify({\n      dbName: datasetName,\n      dbType: datasetType\n    })); // const data = new FormData()\n    // data.set('dbName', datasetName)\n    // data.set('dbType', datasetType)\n\n    const headers = (cov_1lxj7po26n().s[36]++, {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    });\n    cov_1lxj7po26n().s[37]++;\n\n    try {\n      cov_1lxj7po26n().s[38]++;\n      await axios.post(this.getFusekiUrl('/$/datasets'), data, {\n        headers\n      });\n    } catch (error) {\n      cov_1lxj7po26n().s[39]++;\n\n      if (error.response) {\n        cov_1lxj7po26n().b[3][0]++;\n        cov_1lxj7po26n().s[40]++;\n\n        if (error.response.status !== 200) {\n          cov_1lxj7po26n().b[4][0]++;\n          cov_1lxj7po26n().s[41]++;\n\n          if (error.response.status === 409) {\n            cov_1lxj7po26n().b[5][0]++;\n            cov_1lxj7po26n().s[42]++;\n            throw new Error(`failed to create dataset \"${datasetName}\", reason: there is another dataset with the same name`);\n          } else {\n            cov_1lxj7po26n().b[5][1]++;\n          }\n\n          cov_1lxj7po26n().s[43]++;\n          throw new Error(`failed to create dataset \"${datasetName}\" with type ${datasetType}, reason: HTTP status: \"${error.response.status}\", message: ${error.response.statusText}`);\n        } else {\n          cov_1lxj7po26n().b[4][1]++;\n        }\n      } else {\n        cov_1lxj7po26n().b[3][1]++;\n      }\n\n      cov_1lxj7po26n().s[44]++;\n      throw error;\n    }\n  }\n\n  async getTasks() {\n    cov_1lxj7po26n().f[11]++;\n    cov_1lxj7po26n().s[45]++;\n    return axios.get(this.getFusekiUrl('/$/tasks'));\n  }\n\n  async countGraphsTriples(datasetName, endpoint) {\n    cov_1lxj7po26n().f[12]++;\n    const promisesResult = (cov_1lxj7po26n().s[46]++, await Promise.all([axios.get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n      params: {\n        query: DATASET_COUNT_GRAPH_QUERY_1\n      }\n    }), axios.get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n      params: {\n        query: DATASET_COUNT_GRAPH_QUERY_2\n      }\n    })]));\n    const results = (cov_1lxj7po26n().s[47]++, {});\n    const defaultGraphResult = (cov_1lxj7po26n().s[48]++, promisesResult[0]);\n    cov_1lxj7po26n().s[49]++;\n    results.default = defaultGraphResult.data.results.bindings[0].count.value;\n    const allGraphResult = (cov_1lxj7po26n().s[50]++, promisesResult[1]);\n    cov_1lxj7po26n().s[51]++;\n    allGraphResult.data.results.bindings.forEach(binding => {\n      cov_1lxj7po26n().f[13]++;\n      cov_1lxj7po26n().s[52]++;\n      results[binding.g.value] = binding.count.value;\n    });\n    cov_1lxj7po26n().s[53]++;\n    return results;\n  }\n\n  async fetchGraph(datasetName, graphName) {\n    cov_1lxj7po26n().f[14]++;\n    cov_1lxj7po26n().s[54]++;\n    return await axios.get(this.getFusekiUrl(`/${datasetName}`), {\n      params: {\n        graph: graphName\n      },\n      headers: {\n        Accept: 'text/turtle; charset=utf-8'\n      }\n    });\n  }\n\n  async saveGraph(datasetName, graphName, code) {\n    cov_1lxj7po26n().f[15]++;\n    cov_1lxj7po26n().s[55]++;\n    return await axios.put(this.getFusekiUrl(`/${datasetName}`), code, {\n      params: {\n        graph: graphName\n      },\n      headers: {\n        Accept: 'application/json, text/javascript, */*; q=0.01',\n        'Content-Type': 'text/turtle; charset=UTF-8'\n      }\n    }).catch(error => {\n      cov_1lxj7po26n().f[16]++;\n      cov_1lxj7po26n().s[56]++;\n      throw new Error(error.response.data);\n    });\n  }\n\n}\n\nexport default FusekiService;","map":{"version":3,"sources":["C:/progs/vaimee/sjenar/jena-fuseki2/jena-fuseki-ui/src/services/fuseki.service.js"],"names":["axios","qs","ServerStatus","BUS","DATASET_SIZE_QUERY_1","DATASET_SIZE_QUERY_2","DATASET_COUNT_GRAPH_QUERY_1","DATASET_COUNT_GRAPH_QUERY_2","FusekiService","constructor","location","isOffline","pathname","getFusekiUrl","url","normalizedUrl","startsWith","length","slice","endsWith","getServerData","response","get","data","getServerStatus","startTime","Date","getTime","$emit","_duration","error","getDatasetStats","datasetName","getDatasetSize","endpoint","promisesResult","Promise","all","params","query","results","defaultGraphResult","bindings","count","value","allGraphResult","forEach","binding","g","deleteDataset","delete","backupDataset","post","createDataset","datasetType","stringify","dbName","dbType","headers","status","Error","statusText","getTasks","countGraphsTriples","default","fetchGraph","graphName","graph","Accept","saveGraph","code","put","catch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeY;;;;;;;;;;;AAfZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,SAASC,GAAT,QAAoB,UAApB;AAEA,MAAMC,oBAAoB,6BAAG,wCAAH,CAA1B;AACA,MAAMC,oBAAoB,6BAAG,kEAAH,CAA1B;AAEA,MAAMC,2BAA2B,6BAAG,wCAAH,CAAjC;AACA,MAAMC,2BAA2B,6BAAG,kEAAH,CAAjC;;AAEA,MAAMC,aAAN,CAAoB;AAClB;AACF;AACA;AACEC,EAAAA,WAAW,CAAEC,QAAF,EAAY;AAAA;AAAA;AACrB,SAAKC,SAAL,GAAiB,IAAjB;AADqB;AAErB,SAAKC,QAAL,GAAgBF,QAAQ,CAACE,QAAzB;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEC,EAAAA,YAAY,CAAEC,GAAF,EAAO;AAAA;AACjB;AACA,QAAIC,aAAa,6BAAGD,GAAH,CAAjB;AAFiB;;AAGjB,WAAO,6BAAAC,aAAa,CAACC,UAAd,CAAyB,GAAzB,mCAAiCD,aAAa,CAACE,MAAd,GAAuB,CAAxD,CAAP,EAAkE;AAAA;AAChEF,MAAAA,aAAa,GAAGA,aAAa,CAACG,KAAd,CAAoB,CAApB,CAAhB;AACD;;AACD,UAAMN,QAAQ,6BAAG,KAAKA,QAAL,CAAcO,QAAd,CAAuB,GAAvB,iCAA8B,KAAKP,QAAnC,iCAA+C,GAAE,KAAKA,QAAS,GAA/D,CAAH,CAAd;AANiB;AAOjB,WAAQ,GAAEA,QAAS,GAAEG,aAAc,EAAnC;AACD;;AAEkB,QAAbK,aAAa,GAAI;AAAA;AACrB,UAAMC,QAAQ,8BAAG,MAAMrB,KAAK,CAACsB,GAAN,CAAU,KAAKT,YAAL,CAAkB,WAAlB,CAAV,CAAT,CAAd;AADqB;AAErB,WAAOQ,QAAQ,CAACE,IAAhB;AACD;;AAEoB,QAAfC,eAAe,GAAI;AAAA;AACvB,UAAMC,SAAS,8BAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAH,CAAf;AADuB;;AAEvB,QAAI;AAAA;AACF,YAAM3B,KAAK,CAACsB,GAAN,CAAU,KAAKT,YAAL,CAAkB,SAAlB,CAAV,CAAN,CADE,CAEF;;AAFE;;AAGF,UAAI,KAAKF,SAAT,EAAoB;AAAA;AAAA;AAClBR,QAAAA,GAAG,CAACyB,KAAJ,CAAU,kBAAV;AACD,OAFD;AAAA;AAAA;;AAHE;AAMF,WAAKjB,SAAL,GAAiB,KAAjB;AANE;AAOF,aAAO,IAAIT,YAAJ,CAAiB,IAAjB,EAAwB,4BAA2B,KAAK2B,SAAL,CAAeJ,SAAf,CAA0B,IAA7E,CAAP;AACD,KARD,CAQE,OAAOK,KAAP,EAAc;AAAA;AACd,WAAKnB,SAAL,GAAiB,IAAjB;AADc;AAEd,aAAO,IAAIT,YAAJ,CAAiB,KAAjB,EAAyB,uBAAsB4B,KAAM,QAAO,KAAKD,SAAL,CAAeJ,SAAf,CAA0B,IAAtF,CAAP;AACD;AACF;;AAEDI,EAAAA,SAAS,CAAEJ,SAAF,EAAa;AAAA;AAAA;AACpB,WAAO,IAAIC,IAAJ,GAAWC,OAAX,KAAuBF,SAA9B;AACD;;AAEoB,QAAfM,eAAe,CAAEC,WAAF,EAAe;AAAA;AAClC,UAAMX,QAAQ,8BAAG,MAAMrB,KAAK,CAACsB,GAAN,CAAU,KAAKT,YAAL,CAAmB,YAAWmB,WAAY,EAA1C,CAAV,CAAT,CAAd;AADkC;AAElC,WAAOX,QAAQ,CAACE,IAAhB;AACD;;AAEmB,QAAdU,cAAc,CAAED,WAAF,EAAeE,QAAf,EAAyB;AAAA;AAC3C,UAAMC,cAAc,8BAAG,MAAMC,OAAO,CAACC,GAAR,CAAY,CACvCrC,KAAK,CACFsB,GADH,CACO,KAAKT,YAAL,CAAmB,IAAGmB,WAAY,IAAGE,QAAS,EAA9C,CADP,EACyD;AACrDI,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAEnC;AADD;AAD6C,KADzD,CADuC,EAOvCJ,KAAK,CAACsB,GAAN,CAAU,KAAKT,YAAL,CAAmB,IAAGmB,WAAY,IAAGE,QAAS,EAA9C,CAAV,EAA4D;AAC1DI,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAElC;AADD;AADkD,KAA5D,CAPuC,CAAZ,CAAT,CAApB;AAaA,UAAMmC,OAAO,8BAAG,EAAH,CAAb;AACA,UAAMC,kBAAkB,8BAAGN,cAAc,CAAC,CAAD,CAAjB,CAAxB;AAf2C;AAgB3CK,IAAAA,OAAO,CAAC,eAAD,CAAP,GAA2BC,kBAAkB,CAAClB,IAAnB,CAAwBiB,OAAxB,CAAgCE,QAAhC,CAAyC,CAAzC,EAA4CC,KAA5C,CAAkDC,KAA7E;AACA,UAAMC,cAAc,8BAAGV,cAAc,CAAC,CAAD,CAAjB,CAApB;AAjB2C;AAkB3CU,IAAAA,cAAc,CAACtB,IAAf,CAAoBiB,OAApB,CAA4BE,QAA5B,CAAqCI,OAArC,CAA6CC,OAAO,IAAI;AAAA;AAAA;AACtDP,MAAAA,OAAO,CAACO,OAAO,CAACC,CAAR,CAAUJ,KAAX,CAAP,GAA2BG,OAAO,CAACJ,KAAR,CAAcC,KAAzC;AACD,KAFD;AAlB2C;AAqB3C,WAAOJ,OAAP;AACD;;AAEkB,QAAbS,aAAa,CAAEjB,WAAF,EAAe;AAAA;AAAA;AAChC,UAAMhC,KAAK,CAACkD,MAAN,CAAa,KAAKrC,YAAL,CAAmB,cAAamB,WAAY,EAA5C,CAAb,CAAN;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACqB,QAAbmB,aAAa,CAAEnB,WAAF,EAAe;AAAA;AAAA;AAChC,WAAO,MAAMhC,KAAK,CAACoD,IAAN,CAAW,KAAKvC,YAAL,CAAmB,YAAWmB,WAAY,EAA1C,CAAX,CAAb;AACD;;AAEkB,QAAbqB,aAAa,CAAErB,WAAF,EAAesB,WAAf,EAA4B;AAAA;AAC7C,UAAM/B,IAAI,8BAAGtB,EAAE,CAACsD,SAAH,CAAa;AACxBC,MAAAA,MAAM,EAAExB,WADgB;AAExByB,MAAAA,MAAM,EAAEH;AAFgB,KAAb,CAAH,CAAV,CAD6C,CAK7C;AACA;AACA;;AACA,UAAMI,OAAO,8BAAG;AACd,sBAAgB;AADF,KAAH,CAAb;AAR6C;;AAW7C,QAAI;AAAA;AACF,YAAM1D,KAAK,CAACoD,IAAN,CAAW,KAAKvC,YAAL,CAAkB,aAAlB,CAAX,EAA6CU,IAA7C,EAAmD;AACvDmC,QAAAA;AADuD,OAAnD,CAAN;AAGD,KAJD,CAIE,OAAO5B,KAAP,EAAc;AAAA;;AACd,UAAIA,KAAK,CAACT,QAAV,EAAoB;AAAA;AAAA;;AAClB,YAAIS,KAAK,CAACT,QAAN,CAAesC,MAAf,KAA0B,GAA9B,EAAmC;AAAA;AAAA;;AACjC,cAAI7B,KAAK,CAACT,QAAN,CAAesC,MAAf,KAA0B,GAA9B,EAAmC;AAAA;AAAA;AACjC,kBAAM,IAAIC,KAAJ,CAAW,6BAA4B5B,WAAY,wDAAnD,CAAN;AACD,WAFD;AAAA;AAAA;;AADiC;AAIjC,gBAAM,IAAI4B,KAAJ,CAAW,6BAA4B5B,WAAY,eAAcsB,WAAY,2BAA0BxB,KAAK,CAACT,QAAN,CAAesC,MAAO,eAAc7B,KAAK,CAACT,QAAN,CAAewC,UAAW,EAArK,CAAN;AACD,SALD;AAAA;AAAA;AAMD,OAPD;AAAA;AAAA;;AADc;AASd,YAAM/B,KAAN;AACD;AACF;;AAEa,QAARgC,QAAQ,GAAI;AAAA;AAAA;AAChB,WAAO9D,KAAK,CAACsB,GAAN,CAAU,KAAKT,YAAL,CAAkB,UAAlB,CAAV,CAAP;AACD;;AAEuB,QAAlBkD,kBAAkB,CAAE/B,WAAF,EAAeE,QAAf,EAAyB;AAAA;AAC/C,UAAMC,cAAc,8BAAG,MAAMC,OAAO,CAACC,GAAR,CAAY,CACvCrC,KAAK,CACFsB,GADH,CACO,KAAKT,YAAL,CAAmB,IAAGmB,WAAY,IAAGE,QAAS,EAA9C,CADP,EACyD;AACrDI,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAEjC;AADD;AAD6C,KADzD,CADuC,EAOvCN,KAAK,CAACsB,GAAN,CAAU,KAAKT,YAAL,CAAmB,IAAGmB,WAAY,IAAGE,QAAS,EAA9C,CAAV,EAA4D;AAC1DI,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAEhC;AADD;AADkD,KAA5D,CAPuC,CAAZ,CAAT,CAApB;AAaA,UAAMiC,OAAO,8BAAG,EAAH,CAAb;AACA,UAAMC,kBAAkB,8BAAGN,cAAc,CAAC,CAAD,CAAjB,CAAxB;AAf+C;AAgB/CK,IAAAA,OAAO,CAACwB,OAAR,GAAkBvB,kBAAkB,CAAClB,IAAnB,CAAwBiB,OAAxB,CAAgCE,QAAhC,CAAyC,CAAzC,EAA4CC,KAA5C,CAAkDC,KAApE;AACA,UAAMC,cAAc,8BAAGV,cAAc,CAAC,CAAD,CAAjB,CAApB;AAjB+C;AAkB/CU,IAAAA,cAAc,CAACtB,IAAf,CAAoBiB,OAApB,CAA4BE,QAA5B,CAAqCI,OAArC,CAA6CC,OAAO,IAAI;AAAA;AAAA;AACtDP,MAAAA,OAAO,CAACO,OAAO,CAACC,CAAR,CAAUJ,KAAX,CAAP,GAA2BG,OAAO,CAACJ,KAAR,CAAcC,KAAzC;AACD,KAFD;AAlB+C;AAqB/C,WAAOJ,OAAP;AACD;;AAEe,QAAVyB,UAAU,CAAEjC,WAAF,EAAekC,SAAf,EAA0B;AAAA;AAAA;AACxC,WAAO,MAAMlE,KAAK,CACfsB,GADU,CACN,KAAKT,YAAL,CAAmB,IAAGmB,WAAY,EAAlC,CADM,EACgC;AACzCM,MAAAA,MAAM,EAAE;AACN6B,QAAAA,KAAK,EAAED;AADD,OADiC;AAIzCR,MAAAA,OAAO,EAAE;AACPU,QAAAA,MAAM,EAAE;AADD;AAJgC,KADhC,CAAb;AASD;;AAEc,QAATC,SAAS,CAAErC,WAAF,EAAekC,SAAf,EAA0BI,IAA1B,EAAgC;AAAA;AAAA;AAC7C,WAAO,MAAMtE,KAAK,CACfuE,GADU,CACN,KAAK1D,YAAL,CAAmB,IAAGmB,WAAY,EAAlC,CADM,EACgCsC,IADhC,EACsC;AAC/ChC,MAAAA,MAAM,EAAE;AACN6B,QAAAA,KAAK,EAAED;AADD,OADuC;AAI/CR,MAAAA,OAAO,EAAE;AACPU,QAAAA,MAAM,EAAE,gDADD;AAEP,wBAAgB;AAFT;AAJsC,KADtC,EAUVI,KAVU,CAUJ1C,KAAK,IAAI;AAAA;AAAA;AACd,YAAM,IAAI8B,KAAJ,CAAU9B,KAAK,CAACT,QAAN,CAAeE,IAAzB,CAAN;AACD,KAZU,CAAb;AAaD;;AAxLiB;;AA2LpB,eAAef,aAAf","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport axios from 'axios'\nimport qs from 'qs'\nimport ServerStatus from '@/model/server.status'\nimport { BUS } from '@/events'\n\nconst DATASET_SIZE_QUERY_1 = 'select (count(*) as ?count) {?s ?p ?o}'\nconst DATASET_SIZE_QUERY_2 = 'select ?g (count(*) as ?count) {graph ?g {?s ?p ?o}} group by ?g'\n\nconst DATASET_COUNT_GRAPH_QUERY_1 = 'select (count(*) as ?count) {?s ?p ?o}'\nconst DATASET_COUNT_GRAPH_QUERY_2 = 'select ?g (count(*) as ?count) {graph ?g {?s ?p ?o}} group by ?g'\n\nclass FusekiService {\n  /**\n   * @param {Location} location\n   */\n  constructor (location) {\n    this.isOffline = true\n    this.pathname = location.pathname\n  }\n\n  /**\n   * Gets the Fuseki URL, only the pathname onward. The protocol, server, port, etc,\n   * are left to the browser/JS engine & Vue to choose. Previously we were passing\n   * strings such as `/#/ping$`. But this did not work when the application was\n   * deployed on a Tomcat server, for example, where the base URL could be something\n   * like `http://localhost:8080/jena-fuseki/#/`.\n   *\n   * See RC1 vote thread for 4.4.0 for more: https://lists.apache.org/thread/z3gb5w95oc7c4v0g1jpk9jkxm0l4b7lh\n   *\n   * @param {string} url - Vue route URL\n   * @return {string} a new route URL that includes any pathname in the URL\n   */\n  getFusekiUrl (url) {\n    // remove leading `/`'s\n    let normalizedUrl = url\n    while (normalizedUrl.startsWith('/') && normalizedUrl.length > 0) {\n      normalizedUrl = normalizedUrl.slice(1)\n    }\n    const pathname = this.pathname.endsWith('/') ? this.pathname : `${this.pathname}/`\n    return `${pathname}${normalizedUrl}`\n  }\n\n  async getServerData () {\n    const response = await axios.get(this.getFusekiUrl('/$/server'))\n    return response.data\n  }\n\n  async getServerStatus () {\n    const startTime = new Date().getTime()\n    try {\n      await axios.get(this.getFusekiUrl('/$/ping'))\n      // connection reset?\n      if (this.isOffline) {\n        BUS.$emit('connection:reset')\n      }\n      this.isOffline = false\n      return new ServerStatus(true, `Last ping returned OK in ${this._duration(startTime)}ms`)\n    } catch (error) {\n      this.isOffline = true\n      return new ServerStatus(false, `Last ping returned \"${error}\" in ${this._duration(startTime)}ms`)\n    }\n  }\n\n  _duration (startTime) {\n    return new Date().getTime() - startTime\n  }\n\n  async getDatasetStats (datasetName) {\n    const response = await axios.get(this.getFusekiUrl(`/$/stats/${datasetName}`))\n    return response.data\n  }\n\n  async getDatasetSize (datasetName, endpoint) {\n    const promisesResult = await Promise.all([\n      axios\n        .get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n          params: {\n            query: DATASET_SIZE_QUERY_1\n          }\n        }),\n      axios.get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n        params: {\n          query: DATASET_SIZE_QUERY_2\n        }\n      })\n    ])\n    const results = {}\n    const defaultGraphResult = promisesResult[0]\n    results['default graph'] = defaultGraphResult.data.results.bindings[0].count.value\n    const allGraphResult = promisesResult[1]\n    allGraphResult.data.results.bindings.forEach(binding => {\n      results[binding.g.value] = binding.count.value\n    })\n    return results\n  }\n\n  async deleteDataset (datasetName) {\n    await axios.delete(this.getFusekiUrl(`/$/datasets${datasetName}`))\n  }\n\n  /**\n   * @param datasetName\n   * @returns {Promise<{\n   *   data: {\n   *     taskId: string,\n   *     requestId: number\n   *   }\n   * }>}\n   */\n  async backupDataset (datasetName) {\n    return await axios.post(this.getFusekiUrl(`/$/backup${datasetName}`))\n  }\n\n  async createDataset (datasetName, datasetType) {\n    const data = qs.stringify({\n      dbName: datasetName,\n      dbType: datasetType\n    })\n    // const data = new FormData()\n    // data.set('dbName', datasetName)\n    // data.set('dbType', datasetType)\n    const headers = {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n    try {\n      await axios.post(this.getFusekiUrl('/$/datasets'), data, {\n        headers\n      })\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status !== 200) {\n          if (error.response.status === 409) {\n            throw new Error(`failed to create dataset \"${datasetName}\", reason: there is another dataset with the same name`)\n          }\n          throw new Error(`failed to create dataset \"${datasetName}\" with type ${datasetType}, reason: HTTP status: \"${error.response.status}\", message: ${error.response.statusText}`)\n        }\n      }\n      throw error\n    }\n  }\n\n  async getTasks () {\n    return axios.get(this.getFusekiUrl('/$/tasks'))\n  }\n\n  async countGraphsTriples (datasetName, endpoint) {\n    const promisesResult = await Promise.all([\n      axios\n        .get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n          params: {\n            query: DATASET_COUNT_GRAPH_QUERY_1\n          }\n        }),\n      axios.get(this.getFusekiUrl(`/${datasetName}/${endpoint}`), {\n        params: {\n          query: DATASET_COUNT_GRAPH_QUERY_2\n        }\n      })\n    ])\n    const results = {}\n    const defaultGraphResult = promisesResult[0]\n    results.default = defaultGraphResult.data.results.bindings[0].count.value\n    const allGraphResult = promisesResult[1]\n    allGraphResult.data.results.bindings.forEach(binding => {\n      results[binding.g.value] = binding.count.value\n    })\n    return results\n  }\n\n  async fetchGraph (datasetName, graphName) {\n    return await axios\n      .get(this.getFusekiUrl(`/${datasetName}`), {\n        params: {\n          graph: graphName\n        },\n        headers: {\n          Accept: 'text/turtle; charset=utf-8'\n        }\n      })\n  }\n\n  async saveGraph (datasetName, graphName, code) {\n    return await axios\n      .put(this.getFusekiUrl(`/${datasetName}`), code, {\n        params: {\n          graph: graphName\n        },\n        headers: {\n          Accept: 'application/json, text/javascript, */*; q=0.01',\n          'Content-Type': 'text/turtle; charset=UTF-8'\n        }\n      })\n      .catch(error => {\n        throw new Error(error.response.data)\n      })\n  }\n}\n\nexport default FusekiService\n"]},"metadata":{},"sourceType":"module"}